# Task Scheduler Telegram Bot

Task Scheduler - это телеграм бот для управления расписанием и задачами. 

## Возможности бота

- Просмотр запланированных задач.
- Информация о текущей выполняемой задаче.
- Настройка расписания.

## Требования

1. **Go**: версия 1.19 и выше.
2. **Telegram Bot Token**: необходимо получить у [BotFather](https://t.me/BotFather).
3. **Переменные окружения** (см. раздел «Переменные окружения» ниже).

## Переменные окружения

Все основные параметры вынесены в переменные окружения, чтобы легко масштабировать и конфигурировать бота без правки кода:

| Переменная              | Описание                                                                                         | Тип   | Пример      |
|-------------------------|--------------------------------------------------------------------------------------------------|-------|-------------|
| `BOT_TOKEN`    | Токен вашего телеграм-бота.                                                                      | string| `123456:ABC`|
| `MIN_WORKERS`           | Минимальное число воркеров.                                                                      | int   | `1`         |
| `MAX_WORKERS`           | Максимальное число воркеров.                                                                     | int   | `12`        |
| `BUSY_THRESHOLD`        | Порог длины очереди, при превышении которого сразу отправляется сообщение «Запрос обрабатывается».| int   | `50`        |
| `QUEUE_SIZE`            | Размер буферизированного канала задач (очереди).                                                 | int   | `200`       |
| `SCALE_UP_THRESHOLD`    | При достижении этой длины очереди увеличиваем число воркеров (если не достигнут `MAX_WORKERS`).   | int   | `30`        |
| `SCALE_DOWN_THRESHOLD`  | При падении длины очереди до этой отметки уменьшаем число воркеров (если больше `MIN_WORKERS`).   | int   | `10`        |

## Быстрый старт

1. **Клонировать репозиторий**  
   ```bash
   git clone https://github.com/futig/task-scheduler.git
   cd task-scheduler
   ```

2. **Установить Go-зависимости** (либо через go.mod, либо вручную):  
   ```bash
   go mod download
   ```

3. **Настроить переменные окружения**  
   Создать файл `.env` или выставить переменные через системные инструменты (в Linux, например, `export MIN_WORKERS=1` и т. д.).  

   Пример файла `.env`:
   ```bash
   TELEGRAM_BOT_TOKEN=123456:ABC-DEF
   MIN_WORKERS=1
   MAX_WORKERS=12
   BUSY_THRESHOLD=50
   QUEUE_SIZE=200
   SCALE_UP_THRESHOLD=30
   SCALE_DOWN_THRESHOLD=10
   ```

4. **Запустить бота**  
   ```bash
   go run main.go
   ```
   или собрать бинарник:
   ```bash
   go build -o mybot
   ./mybot
   ```

5. **Проверить работу**  
   - Найти своего бота в Telegram (по имени, которое вы задали при создании через BotFather).
   - Начать диалог, отправить `/start` или любое сообщение.  
